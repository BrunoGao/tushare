# ljwx-stock 训练管理Web界面使用指南

## 🚀 界面概述

ljwx-stock训练管理Web界面是一个可视化的训练过程管理工具，提供了完整的训练数据生成、模型训练和效果监控功能。

### 主要功能
- **数据管理**: TuShare数据获取和训练数据生成
- **模型训练**: 可视化的模型训练配置和进度监控  
- **效果监控**: 模型性能测试和结果展示
- **实时日志**: WebSocket实时日志显示

## 🌐 启动界面

### 方法1：直接启动
```bash
cd web_interface
python app.py
```

### 方法2：使用启动脚本
```bash
python start_web_interface.py
```

### 访问地址
- 默认地址: http://localhost:5001
- 界面支持实时WebSocket通信

## 📋 界面功能详解

### 1. 总览面板 (Dashboard)

#### 系统指标卡片
- **训练数据**: 显示总样本数量
- **可用模型**: 显示Ollama中的ljwx模型数量
- **训练进度**: 当前训练任务的完成度
- **系统状态**: 运行状态指示器

#### 实时日志
- 绿色文本: 普通信息
- 黄色文本: 警告信息
- 红色文字: 错误信息
- 蓝色文字: 成功信息

### 2. 数据管理 (Data Management)

#### TuShare配置
```
TuShare Token: [可选] 输入Pro Token获得更好数据质量
测试连接: 验证Token有效性和数据访问权限
```

#### 数据生成配置
- **股票数量**: 10-1000只，建议100-500只
- **历史天数**: 30/90/180/365天，建议365天
- **最大样本数**: 100-5000个，建议1000-2000个

#### 现有训练数据
- 文件列表显示: 文件名、样本数、大小、创建时间
- 一键选择: 直接选择文件用于模型训练

### 3. 模型训练 (Model Training)

#### 基础配置
```
基础模型: ljwx-stock/deepseek-coder/qwen
训练数据文件: 从数据管理中生成的JSONL文件
新模型名称: 自动生成或手动指定
训练样本数量: 50-1000个，建议200-500个
```

#### 高级参数
- **Temperature**: 0-2，控制输出随机性，推荐0.7
- **Top P**: 0-1，核采样参数，推荐0.9
- **Top K**: 1-100，候选词数量，推荐40
- **Repeat Penalty**: 1-2，重复惩罚，推荐1.1

#### 训练进度监控
- 实时进度条显示
- 当前任务状态
- 停止训练功能

### 4. 效果监控 (Model Monitoring)

#### 模型列表
- 显示所有ljwx相关模型
- 模型ID、大小、修改时间
- 快速测试功能

#### 模型测试
```
选择模型: 从可用模型中选择
测试问题: 输入股票分析问题
模型回答: 实时显示分析结果
```

## 🛠️ 使用流程

### 完整训练流程

1. **配置数据源**
   ```
   总览 → 数据管理 → TuShare配置
   输入Token → 测试连接
   ```

2. **生成训练数据**
   ```
   设置参数: 股票数量、历史天数、样本数
   点击"开始生成" → 监控进度 → 等待完成
   ```

3. **训练模型**
   ```
   模型训练 → 选择训练文件 → 配置参数
   点击"开始训练" → 监控进度 → 等待完成
   ```

4. **测试验证**
   ```
   效果监控 → 选择新模型 → 输入测试问题
   查看回答质量 → 评估模型效果
   ```

### 快速测试流程

1. **使用现有数据**
   ```
   数据管理 → 查看现有文件 → 选择文件
   ```

2. **简单训练**
   ```
   模型训练 → 使用默认参数 → 开始训练
   ```

3. **效果验证**
   ```
   效果监控 → 测试新模型
   ```

## 📊 监控指标

### 进度指标
- **数据生成进度**: 0% → 100%
- **模型训练进度**: 0% → 100%
- **任务状态**: 空闲/运行中/完成/错误

### 数据指标
- **训练样本数**: 实际生成的样本数量
- **处理股票数**: 成功处理的股票数量
- **文件大小**: 生成文件的磁盘占用

### 模型指标
- **响应时间**: 模型推理速度
- **回答质量**: 专业性和准确性
- **模型大小**: 磁盘占用空间

## ⚠️ 注意事项

### 系统要求
- **Python 3.8+**: 支持Flask和SocketIO
- **Ollama**: 必须安装并运行
- **ljwx-stock基础模型**: 必须预先创建
- **内存**: 建议8GB+用于模型训练
- **存储**: 每个模型约4GB空间

### 网络要求
- **TuShare API**: 需要网络访问
- **WebSocket**: 用于实时通信
- **端口5001**: 确保端口未被占用

### 性能优化
- **批量大小**: 根据内存调整股票处理批量
- **样本数量**: 平衡训练效果和时间成本
- **参数调优**: 根据任务特点调整模型参数

### 故障排除

#### 常见问题
1. **端口占用**: 修改app.py中的端口号
2. **Ollama连接失败**: 确保Ollama服务运行
3. **TuShare访问失败**: 检查Token和网络
4. **内存不足**: 减少批量大小和样本数量

#### 日志查看
- **Web界面日志**: 实时显示在界面中
- **Flask日志**: 终端输出
- **文件日志**: logs/目录下的日志文件

## 🔧 高级配置

### 自定义参数
```python
# 在app.py中修改默认配置
default_config = {
    'stock_count': 200,        # 默认股票数量
    'days_back': 365,          # 默认历史天数
    'max_examples': 1500,      # 默认样本数
    'sample_count': 300,       # 默认训练样本数
}
```

### 扩展功能
- **添加新的数据源**: 扩展TuShareDataExtractor
- **自定义训练模板**: 修改prompt templates
- **增加模型类型**: 扩展base_model选项
- **定制UI样式**: 修改CSS样式

## 📞 技术支持

### 获取帮助
- **界面问题**: 查看浏览器控制台错误
- **后端问题**: 查看Flask日志输出
- **训练问题**: 检查Ollama和模型状态
- **数据问题**: 验证TuShare Token和网络

### 联系方式
- **文档**: 查看项目README
- **日志**: 保存详细的错误日志
- **环境**: 提供Python和系统版本信息

---

🎉 **开始使用ljwx-stock训练管理界面，享受可视化的AI训练体验！**